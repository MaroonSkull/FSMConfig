# Task Strategy

## Принцип

Критические и сложные задачи должны разбиваться на множество мелких, независимых подзадач.

## Зачем это нужно

### 1. Уменьшение контекстной нагрузки

- Нейросети имеют ограниченный размер контекста
- Меньшие задачи требуют меньше контекста
- Это повышает качество выполнения каждой подзадачи

### 2. Подготовка к параллельному выполнению

- Мелкие независимые задачи можно выполнять параллельно
- Это ускоряет общее время выполнения
- В будущем будет реализована поддержка параллельного вызова агентов

## Как разбивать задачи

### Правило 1: Одна задача — одна конкретная цель

- ❌ Плохо: "Проанализировать весь проект и исправить все проблемы"
- ✅ Хорошо: "Проверить соответствие C++ стандарта в CMakeLists.txt"

### Правило 2: Задача должна быть завершённой

- Каждая подзадача должна иметь чёткий критерий завершения
- Результат подзадачи должен быть самостоятельно полезен

### Правило 3: Минимизировать зависимости между подзадачами

- Подзадачи должны быть как можно более независимыми
- Если подзадача B зависит от подзадачи A, они должны выполняться последовательно

## Примеры разбиения

### Пример 1: Критический анализ документации

Вместо одной большой задачи "Проанализировать AGENTS.md":

- ✅ Подзадача 1: "Проверить соответствие C++ стандарта"
- ✅ Подзадача 2: "Проверить формат YAML конфигурации"
- ✅ Подзадача 3: "Проверить наличие конфигурационных файлов линтеров"
- ✅ Подзадача 4: "Проверить соответствие структуры файлов"

### Пример 2: Рефакторинг кода

Вместо "Рефакторить все классы проекта":

- ✅ Подзадача 1: "Рефакторить класс StateMachine"
- ✅ Подзадача 2: "Рефакторить класс ConfigParser"
- ✅ Подзадача 3: "Рефакторить класс EventDispatcher"

### Пример 3: Добавление документации

Вместо "Задокументировать весь проект":

- ✅ Подзадача 1: "Задокументировать методы StateMachine"
- ✅ Подзадача 2: "Задокументировать методы ConfigParser"
- ✅ Подзадача 3: "Задокументировать методы EventDispatcher"

## Когда НЕ стоит разбивать

- Если задача тривиальная и занимает менее 2-3 минут
- Если разбиение создаст больше сложностей, чем решит
- Если подзадачи будут сильно зависеть друг от друга

## Практические рекомендации

1. **Ориентир на время:** Идеальная подзадача занимает 5-15 минут
2. **Ориентир на контекст:** Подзадача должна использовать не более 20-30% доступного контекста
3. **Ориентир на результат:** Каждая подзадача должна давать конкретный измеримый результат

## Для orchestrator режима

При делегировании задач:

1. Анализировать сложность задачи
2. Если задача сложная — разбивать на подзадачи
3. Создавать отдельные подзадачи для разных аспектов
4. Координировать выполнение подзадач
5. Собирать результаты в единое целое
